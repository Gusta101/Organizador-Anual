{% load static %}
<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href='https://fonts.googleapis.com/css2?family=Balsamiq+Sans:wght@400;700&family=Mali:wght@400;500;600;700&display=swap' rel='stylesheet'>

    <!-- Ícones -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css'>

    <!-- Styles -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <!-- Personalização -->
    <link rel='icon' type='image/png' href='{% static "img/favicon.png" %}'>
    <title>Organizador Pessoal</title>
</head>

<body>
    <script>
        if (localStorage.getItem("theme") === "dark") {
            document.body.classList.add("dark-mode");
        }
    </script>

    <!-- Barra Lateral -->
    <nav class="sidebar">
        <button id='closeBtn' class='btn-animated bg-color4' style='align-self: flex-end;'>
            <i class='fa-solid fa-xmark fs-5'></i>
        </button>
        <h2>Planejador 2026</h2>
        <ul class='p-0'>
            <li><a href='/'><i class='fa-solid fa-house me-2'></i> Início</a></li>
            <li><a href='{% url "financeiro:home" %}'><i class='fa-solid fa-wallet me-2'></i> Financeiro</a></li>
            <li><a href='#'><i class='fa-solid fa-briefcase me-2'></i> Trabalho</a></li>
            <li><a href='{% url "estudos:home" %}'><i class='fa-solid fa-book me-2'></i> Estudos</a></li>
            <li><a href='#'><i class='fa-solid fa-palette me-2'></i> Hobbies</a></li>
            <li><a href='#'><i class='fa-solid fa-heart-pulse me-2'></i> Saúde</a></li>
        </ul>
        <div class="fixed-bottom position-absolute bottom-0 w-100 text-center">
            <p class="m-2" style="font-size: 13px;">
                &copy; 2026 - Desenvolvido por Gustavo Balbino
            </p>
        </div>
    </nav>
    <div id="overlay"></div>

    <main class='main-content d-flex flex-column'>
        <header class='top-bar shadow p-3 mb-0 m-0 d-flex justify-content-between align-items-center'>
            <button id='openBtn' class='btn-animated bg-color4'>
                <i class='fa-solid fa-bars fs-5'></i>
                <span class='d-none d-md-inline ms-2'>Menu</span>
            </button>

            <h2 id='current-screen' class='h4 m-0 text-center flex-grow-1 mx-2 text-truncate'>
                {% block title %}Dashboard{% endblock %}
            </h2>

            <button id='themeToggle' class='btn-animated bg-color5' title='Mudar Tema'>
                <i class='fa-solid fa-circle-half-stroke fs-5'></i>
                <span class='d-none d-md-inline ms-2'>Tema</span>
            </button>
        </header>

        <div class='container-fluid px-3 px-md-4 d-flex flex-column flex-grow-1 text-start'>
            <span class='d-block my-3 text-muted fw-bold' id='current-date'></span>
            <div class='content-area flex-grow-1'>
                {% block content %}
                {% endblock %}
            </div>
        </div>

        <footer class='py-3 mt-auto border-top text-center'>
            <p class='mb-0 small'>&copy; 2026 - Desenvolvido por Gustavo Balbino</p>
        </footer>
    </main>

    <!-- Scripts -->
    <script>
        // Script para abrir e fechar a barra lateral
        const sidebar = document.querySelector(".sidebar");
        const closeBtn = document.getElementById("closeBtn");
        const openBtn = document.getElementById("openBtn");
        const overlay = document.getElementById("overlay");

        function toggleMenu() {
            sidebar.classList.toggle("open");
            overlay.classList.toggle("active");
        }

        openBtn.addEventListener("click", toggleMenu);
        closeBtn.addEventListener("click", toggleMenu);
        overlay.addEventListener("click", toggleMenu);
    </script>

    <script>
        // Script para mostrar a data atual em português do Brasil
        const now = new Date();
        const day = String(now.getDate()).padStart(2, "0");
        const month = String(now.getMonth() + 1).padStart(2, "0");

        document.getElementById("current-date").innerText = day + "/" + month;
    </script>

    <script>
        // Script para alternar o tema (dark/light) no clique do botão
        const themeBtn = document.getElementById("themeToggle");

        themeBtn.addEventListener("click", () => {
            document.body.classList.toggle("dark-mode");

            // Salva a escolha no navegador (Local Storage)
            if (document.body.classList.contains("dark-mode")) {
                localStorage.setItem("theme", "dark");
            } else {
                localStorage.setItem("theme", "light");
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
</body>

</html>